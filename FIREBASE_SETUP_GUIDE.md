# Firebase Setup Guide for NXL Machine Test

## ğŸ”¥ Firebase Integration Complete!

Your Flutter app is now configured with Firebase Authentication and Firestore. Follow the steps below to complete the Firebase setup.

---

## ğŸ“‹ Prerequisites

1. **Firebase Account**: Create a free account at [Firebase Console](https://console.firebase.google.com/)
2. **Firebase CLI**: Install the Firebase CLI and FlutterFire CLI

---~

## ğŸš€ Setup Steps

### Step 1: Install Firebase CLI

Open PowerShell and run:

```powershell
# Install Firebase CLI (if not already installed)
npm install -g firebase-tools

# Login to Firebase
firebase login

# Install FlutterFire CLI
dart pub global activate flutterfire_cli
```

### Step 2: Create Firebase Project

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Click **"Add project"**
3. Enter project name (e.g., `nxl-machine-test`)
4. Disable Google Analytics (optional)
5. Click **"Create project"**

### Step 3: Configure Firebase for Flutter

Run this command in your project directory:

```powershell
flutterfire configure
```

This will:
- Create a Firebase project (or select existing one)
- Register your Flutter app with Firebase
- Generate `firebase_options.dart` file
- Configure Android, iOS, Web, etc.

**Select the platforms you want to support** (at minimum, select Android)

### Step 4: Enable Firebase Authentication

1. In Firebase Console, go to **Authentication**
2. Click **"Get started"**
3. Go to **"Sign-in method"** tab
4. Enable **"Email/Password"** provider
5. Click **"Save"**

### Step 5: Enable Cloud Firestore

1. In Firebase Console, go to **Firestore Database**
2. Click **"Create database"**
3. Select **"Start in test mode"** (for development)
4. Choose a location (e.g., `us-central`)
5. Click **"Enable"**

### Step 6: Update main.dart (IMPORTANT!)

After running `flutterfire configure`, update your `main.dart`:

```dart
import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nxl_machine_test/features/auth/presentation/pages/login_page.dart';
import 'firebase_options.dart'; // Import the generated file

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // Use the generated Firebase options
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  
  runApp(
    const ProviderScope(
      child: MyApp(),
    ),
  );
}

// ... rest of the code
```

---

## ğŸ—ï¸ Project Structure

```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ firebase_options.dart (generated by FlutterFire CLI)
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ errors/
â”‚   â”‚   â”œâ”€â”€ failures.dart
â”‚   â”‚   â””â”€â”€ exceptions.dart
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ validators.dart
â”‚   â””â”€â”€ providers/
â”‚       â””â”€â”€ firebase_providers.dart
â”‚
â””â”€â”€ features/
    â””â”€â”€ auth/
        â”œâ”€â”€ data/
        â”‚   â”œâ”€â”€ models/
        â”‚   â”‚   â””â”€â”€ user_model.dart
        â”‚   â”œâ”€â”€ datasources/
        â”‚   â”‚   â””â”€â”€ auth_remote_datasource.dart
        â”‚   â””â”€â”€ repositories/
        â”‚       â””â”€â”€ auth_repository_impl.dart
        â”‚
        â”œâ”€â”€ domain/
        â”‚   â”œâ”€â”€ entities/
        â”‚   â”‚   â””â”€â”€ user_entity.dart
        â”‚   â””â”€â”€ repositories/
        â”‚       â””â”€â”€ auth_repository.dart
        â”‚
        â””â”€â”€ presentation/
            â”œâ”€â”€ providers/
            â”‚   â”œâ”€â”€ auth_provider.dart
            â”‚   â””â”€â”€ auth_repository_provider.dart
            â””â”€â”€ pages/
                â”œâ”€â”€ login_page.dart
                â””â”€â”€ register_page.dart
```

---

## ğŸ” Firestore Security Rules (Production)

For production, update your Firestore rules:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      // Users can only read/write their own data
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

---

## ğŸ§ª Testing

1. **Run the app**:
   ```powershell
   flutter run
   ```

2. **Register a new user**:
   - Click "Register"
   - Fill in Name, Email, Password
   - Click "REGISTER"

3. **Check Firestore**:
   - Go to Firebase Console â†’ Firestore Database
   - You should see a new document in the `users` collection

4. **Login**:
   - Use the registered email and password
   - Click "LOGIN"

---

## ğŸ“¦ Dependencies Added

```yaml
dependencies:
  flutter_riverpod: ^2.4.9
  firebase_core: ^2.24.2
  firebase_auth: ^4.16.0
  cloud_firestore: ^4.14.0
  fpdart: ^1.1.0
```

---

## ğŸ¯ Features Implemented

âœ… **Clean Architecture** with separation of concerns
âœ… **Firebase Authentication** (Email/Password)
âœ… **Cloud Firestore** for user data storage
âœ… **Riverpod** state management
âœ… **Error handling** with Either type (fpdart)
âœ… **Form validation**
âœ… **Loading states**
âœ… **User feedback** (SnackBars)

---

## ğŸ”§ Troubleshooting

### Issue: "No Firebase App '[DEFAULT]' has been created"
**Solution**: Make sure you've run `flutterfire configure` and imported `firebase_options.dart`

### Issue: "PlatformException: firebase_auth"
**Solution**: 
- Check that Email/Password is enabled in Firebase Console
- Verify internet connection
- Check Firebase project configuration

### Issue: Build errors on Android
**Solution**:
- Update `android/app/build.gradle`:
  ```gradle
  android {
      compileSdkVersion 34
      minSdkVersion 21
  }
  ```

---

## ğŸ“ Next Steps

1. âœ… Run `flutterfire configure`
2. âœ… Enable Email/Password authentication in Firebase Console
3. âœ… Enable Firestore in Firebase Console
4. âœ… Update `main.dart` with generated `firebase_options.dart`
5. âœ… Test registration and login
6. ğŸ”œ Add password reset functionality
7. ğŸ”œ Add email verification
8. ğŸ”œ Add profile page
9. ğŸ”œ Add logout functionality

---

## ğŸ†˜ Need Help?

- [Firebase Documentation](https://firebase.google.com/docs)
- [FlutterFire Documentation](https://firebase.flutter.dev/)
- [Riverpod Documentation](https://riverpod.dev/)

---

**Happy Coding! ğŸš€**
